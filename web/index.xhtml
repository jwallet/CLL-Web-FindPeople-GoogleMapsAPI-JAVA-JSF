<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
      xmlns:fn="http://xmlns.jcp.org/jsp/jstl/functions"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:m="http://code.google.com/p/gmaps4jsf/">
    	<ui:composition template="common/template.xhtml">
            <ui:define name="title">Index</ui:define>
    		<ui:define name="content">
                   <section class="container">
                       <c:if test="#{c.connecterStatus}">
                        <div class="fixed-action-btn">
                            <h:form>
                                <h:commandLink class="btn-floating btn-large waves-effect waves-light yellow darken-4" action="#{c.loadPublier()}"><i class="large material-icons">add</i></h:commandLink>
                            </h:form>
                        </div>
                           </c:if>

                        <!--#{c.email}-->
                        <!--#{c.passe}-->
                        <!--#{c.connecterStatus}-->
                        <!--#{c.dbEmail}-->
                        <!--#{c.dbPasse}-->
                        <!--#{c.codePostal}-->
                        <!--#{c.GPSlat}-->
                        <!--#{c.GPSlon}-->
                        <!--#{c.tempCodePostal}-->
                   </section>
                    <!--
                    <article>un site que vous devez vous inscrire votre code postal, la distance
                    que vous voulez predefinir en km (1km (a pieds) ou 5km (en voiture) aux alentours par exemple),ensuite
                    la liste des personnes concordant a votre profil seront afficher (meme chose pour eux), les anciens membres
                    auront un pop-up (nouveau membre a joint votre quartier) et une zone menu (nouveaux membres qui ont joint
                    votre quartier depuis votre derniere viste), une zone menu (membres dans votre quartier), une zone aside
                    membre en ligne pour discuter.</article>
                    <article>possibilite dajouter et indiquer ses disponibilites de rencontres pour du sport. avertissement
                    du danger des tranches dage et adulte vers enfant. site peut etre pour 18 ans et plus seulement.
                    possibilite dajouter un forum pour parler a plusieurs membres hors zone egalement. possibilite de
                    creer un groupe chat ou un groupe sportif, ou un groupe sportif pour remplir un parc a une date precise
                    (evenement sportif). possibilite de creer tournoi, possibilite de creer des statistiques de joueurs.</article>
                    <article>jutilise ce site web pour convertir les code postaux en lat et lon pour les sauver dans la bd:
                        https://maps.googleapis.com/maps/api/geocode/json?address=g6c1p9, jutilise cette algo pour recuperer
                        la distance en km http://andrew.hedges.name/experiments/haversine/, et en faire un deriver de radius
                        pour un 5km aux alentours, si les usagers dans la bd sont a linterieur. je peux utiliser cet api pour
                        connaitre la distance entre deux adresses et le traffic http://maps.googleapis.com/maps/api/distancematrix/json?origins=G6C1P9!destinations=G6V6Y9!mode=walking!language=fr-CA!sensor=false
                    </article>                        
                    </section>-->
                    <f:view>
                        <h:form id="form">
                            <m:map zoom="#{c.zoom}"  width="100%" height="90vh" longitude="#{c.GPSlon}" latitude="#{c.GPSlat}" showDefaultControls="false">
                                <c:if test="#{!empty c.mapItems}">
                                    <ui:repeat value="#{c.mapItems}" var="i">
                                        <m:marker id="item${i.idItem}" latitude="${i.lat}" longitude="${i.lon}">
                                            <m:htmlInformationWindow htmlText= "${c.setHtmlViewItem(i.idItem)}" />
                                        </m:marker>
                                    </ui:repeat>
                                </c:if>
                            </m:map>
                        </h:form>
                    </f:view>
    		</ui:define>
    	</ui:composition>
</html>