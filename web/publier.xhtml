<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
      xmlns:fn="http://xmlns.jcp.org/jsp/jstl/functions"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:jsf="http://xmlns.jcp.org/jsf">
        <ui:composition template="common/template.xhtml">
            <ui:define name="title">Publier</ui:define>
    		<ui:define name="content">
                    <section class="container">
                        <c:choose>
                            <c:when test='#{c.connecterStatus}'>
                                <div class="col s12">
                            <h4>Annoncer un nouvel item</h4>
                            <br/>
                            <h:form class="col s12" enctype="multipart/form-data">
                                
                                <div class='col s12'>
                                            <i class="material-icons small prefix left">photo_camera</i>
                                         </div>
                                <div class="col s6">   
                                     <div class="file-field input-field">                                               
                                             <div class="btn right">
                                                <span>Parcourir</span>
                                                <input type="file" accept="image/*" required="true" jsf:value="#{c.image}">
<!--                                                    <f:ajax listener="#{c.uploadImage}"/>-->
                                                </input>
                                            </div>
                                            <div class="file-path-wrapper">
                                                <input class="file-path validate" type="text" /><!--jsf:value="#{c.itemImgURL}"-->
                                                <label for="icon_prefix" style='margin-left:50px;'>Photo de l'item</label>
                                            </div>
                                    </div>
<!--                                    <div class='input-field col s12'>
                                        <i class="material-icons prefix">photo_camera</i>
                                        <input id="icon_prefix" type="url" pattern="https?://.+" class="validate" required='true' jsf:value="#{c.itemImgURL}"/>
                                        <label for="icon_prefix">Lien url de la photo de l'item</label>
                                    </div>-->
                                </div>  
<!--                            </h:form>
                            <h:form class="col s12">-->
                                <c:if test="#{c.codePostal eq '' &amp;&amp; c.tempCodePostal eq ''}">
                                    <div class="input-field col s12">
                                            <i class="material-icons prefix">my_location</i>
                                            <input id="icon_prefix" type="text" class="validate" required='true' pattern="[A-Za-z][0-9][A-Za-z][0-9][A-Za-z][0-9]" jsf:value='#{c.newCPostal}'/>
                                            <label for="icon_prefix">Code postal</label>
                                    </div>
                                </c:if>
                                
                                <c:if test="#{!c.connecterStatus}">
                                    <div class="input-field col s12">
                                            <i class="material-icons prefix">email</i>
                                            <input id="icon_prefix" type="email" class="validate" jsf:value="#{c.email}"/>
                                            <label for="icon_prefix">Courriel</label>
                                    </div>
                                </c:if>        
                                
                                <c:if test="#{c.telephone eq ''}">
                                    
                                    <div class="input-field col s12">
                                            <i class="material-icons prefix">phone</i>
                                            <input id="icon_prefix" type="tel" pattern="\d{3}[\- ]\d{3}[\- ]\d{4}" class="validate" jsf:value="#{c.telephone}"/>
                                            <label for="icon_prefix">Telephone</label>
                                    </div>
                                </c:if>
                                
                                <div class="col s12">
                                    <div class="input-field col s12">
                                        <i class="material-icons prefix">timer</i>
                                        <input type="date" class="datepicker" jsf:value="#{c.itemDateMax}"/>
                                        <label for="icon">Date de suppression de l'annonce</label>
                                    </div>
                                </div>       
                                
                                <p><i class="material-icons small prefix left">directions_car</i>L'item devra être ramassé:</p>
                                <div class="col s12">
                                    <div class="container">
<!--                                    <p>
                                        <input name="ramassage" class="with-gap" type="radio" id="ramassageP" />
                                        <label for="ramassageP">En personne</label>
                                    </p>
                                    <p>
                                        <input name="ramassage" class="with-gap" type="radio" id="ramassageR" checked="true"/>
                                        <label for="ramassageR">Au bord de la rue</label>
                                    </p>-->
                                    <h:selectOneRadio value="#{c.itemRamassage}">
                                            <f:selectItem itemValue="1" itemLabel="En personne" />
                                            <f:selectItem itemValue="2" itemLabel="Au bord de la rue"/>
                                    </h:selectOneRadio>
                                    </div>
                                </div>                                  
                                  
                                <div class="hide" id="formPersonne">                                    
                                    
<!--                                    <div class="input-field col s12">
                                        <i class="material-icons prefix">watch_later</i>
                                        <input id="icon_prefix" type="text" class="validate" jsf:value="#{c.itemDispos}"></input>
                                        <label for="icon_prefix">Disponibilités</label>
                                    </div>-->
                                    
                                </div>
                                
                                <div class="hide" id="formBordRue">
                                    <!--N/A-->
                                </div>
                                
<!--                                <div class="input-field col s12">
                                    <i class="material-icons prefix">mode_edit</i>
                                    <textarea id="icon_prefix2" class="materialize-textarea"></textarea>
                                    <label for="icon_prefix">Commentaires</label>
                                </div>-->
                                
                                <br/>     
                                <div class="input-field col s12">
                                    <h:commandButton action="#{c.publier()}" value="Publier" class="waves-effect waves-light btn"/>
                                </div>
                            </h:form>
                            <br/>
                        </div> 
                            </c:when>
                            <c:otherwise>
                                <h4>Erreur</h4>
                                <p>Vous n'avez pas l'accès à cette page.</p>
                            </c:otherwise>
                        </c:choose>
                                              
                    </section>    
                    <script type="text/javascript">
                    $( document ).ready(function(){
                        $('.datepicker').pickadate({
                            selectMonths: false,
                            selectYears: 1
                        });
                        $('input:radio[name="j_idt53:j_idt63"]').change(function(){
                            if($(this).is(':checked'))
                            {
                                if($(this).attr('id') === "j_idt53:j_idt63:0")
                                {
                                    $('#formPersonne').removeClass('hide');
                                    $('#formBordRue').addClass('hide');
                                }
                                else{
                                    $('#formBordRue').removeClass('hide');
                                    $('#formPersonne').addClass('hide');
                                }
                            }
                            else
                            {
                                $('#formPersonne').removeClass('hide');
                            }
                        });
                    });
                    </script>
                </ui:define>            
        </ui:composition>
</html>
